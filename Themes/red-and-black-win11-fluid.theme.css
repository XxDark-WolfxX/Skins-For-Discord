/**
 * Dynamic Red Spectrum Fluid Theme - FINAL REVISION
 * Glassmorphism Fix, Segoe UI Font, and 1366x768 Optimization
 */

/* ======================================================= */
/* 1. DARK MODE (DEFAULT) - Deep Red Spectrum */
/* ======================================================= */
:root {
  /* --- DARK MODE RED SPECTRUM --- */
  --red-deep-maroon: #600000;
  --red-crimson: #A50000;
  --red-ruby: #C60000;
  --red-accent: #FF3333;
  
  --fluid-panel-bg: rgba(0, 0, 0, 0.55); /* Increased transparency for stronger glass effect */
  --red-tint-layer: rgba(100, 0, 0, 0.15);
  --text-color: #FFFFFF;
  
  /* --- UI SETTINGS --- */
  --fluid-radius: 12px;
  --fluid-gap: 8px;
  --glass-blur: blur(14px); /* Increased blur level for better visibility of effect */

  /* --- FONT SETTING --- */
  --main-font: "Segoe UI", "Tahoma", "Geneva", sans-serif;

  /* --- DISCORD OVERRIDES (General UI) --- */
  --brand-experiment: var(--red-accent);
  --interactive-active: var(--red-accent);
  --interactive-hover: var(--red-ruby);
  --header-primary: var(--text-color);
  --background-primary: transparent;
  --background-secondary: transparent;
  --background-tertiary: transparent;
}

/* 2. CORE STYLING & GLASSMORPHISM APPLICATION */

/* Apply Segoe UI Font Globally */
body, 
div[class*="content"], 
span, 
button {
  font-family: var(--main-font) !important;
}

/* Background Setup */
body {
  /* Placeholder image - REPLACE WITH YOUR BACKGROUND URL */
  background: url('https://i.imgur.com/3pJ3d.jpg') center/cover no-repeat fixed; 
  background-size: cover;
}
#app-mount {
  background-color: rgba(0, 0, 0, 0.6); 
  box-shadow: inset 0 0 9999px var(--red-tint-layer); 
}

/* Ensure ALL wrappers are transparent so glass can see wallpaper */
.app-3xd6d0, .bg-1QIAus, .base-3dtUhz {
  background: transparent !important;
}

/* GLASS PANEL STYLING: Apply blur and transparent background to all floating elements */
nav[class*="guilds"], 
div[class*="sidebar"], 
div[class*="chatContent"],
div[class*="members"],
div[class*="activityPanel"],
div[class*="scrollableContainer"] {
  /* THIS IS THE CRITICAL GLASS LINE */
  backdrop-filter: var(--glass-blur) !important; 
  background: var(--fluid-panel-bg) !important;

  border-radius: var(--fluid-radius);
  color: var(--text-color);
  /* Other structure retained */
  padding: var(--fluid-gap);
  box-sizing: border-box;
}

/* Reset padding on items that shouldn't have it (like the main chat content) */
div[class*="chatContent"],
div[class*="members"] {
  padding: 0;
}

/* CRIMSON ACCENTS AND SCROLLBARS */
/* (Retained previous logic using spectrum variables) */
div[class*="activityPanel"] {
  background-color: var(--red-deep-maroon) !important;
  box-shadow: 0 0 15px var(--red-deep-maroon);
  border: 1px solid var(--red-crimson);
  margin: 0 var(--fluid-gap) var(--fluid-gap) var(--fluid-gap);
  padding: 8px;
}
div[class*="modeSelected"] a {
  background: var(--red-ruby) !important;
  border-left: 4px solid var(--red-accent);
  border-radius: 0 var(--fluid-radius) var(--fluid-radius) 0;
}
div[class*="numberBadge"], div[class*="unreadPill"] {
  background-color: var(--red-accent) !important;
  box-shadow: 0 0 8px var(--red-accent);
}
::-webkit-scrollbar-thumb {
  background-color: var(--red-crimson) !important;
  border-radius: 4px;
}

/* ======================================================= */
/* 3. LIGHT MODE OVERRIDES - Dynamic Palette Shift */
/* ======================================================= */
@media (prefers-color-scheme: light) {
  :root {
    /* --- LIGHT MODE RED SPECTRUM --- */
    --red-deep-maroon: #750000;
    --red-crimson: #B00000;
    --red-ruby: #FFE3E3;          /* Lighter background for better contrast */
    --red-accent: #FF3333;

    --fluid-panel-bg: rgba(255, 255, 255, 0.85); /* White Panels */
    --red-tint-layer: rgba(255, 0, 0, 0.08); 
    --text-color: #000000;        /* Black Text */
    --header-secondary: #5C5C5C;
  }

  /* Light Mode Background adjustments */
  body {
    background-color: #F8F8F8; 
    background-image: none;
  }
  
  #app-mount {
    background-color: rgba(255, 255, 255, 0.5); 
    box-shadow: inset 0 0 9999px var(--red-tint-layer); 
  }
  
  /* Text Area Border */
  div[class*="scrollableContainer"] {
    border: 1px solid #C0C0C0 !important;
  }
  
  /* Hover state uses the light background color */
  div[class*="modeSelected"] a {
    background: var(--red-ruby) !important;
  }
}